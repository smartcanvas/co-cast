buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'org.akhikhl.gretty:gretty:+'
    }
}

apply plugin: 'java'
apply plugin: 'war'
//apply plugin: 'jetty'
apply plugin: 'org.akhikhl.gretty'

// Group ID
group 'com.ciandt.d1'
// Version
version '1.0-SNAPSHOT'
//WAR base name
war.baseName = 'co-cast-backend'

repositories {
    mavenLocal()
    mavenCentral()
    jcenter()
}

dependencies {

    //Constants with the versions used by the most important libraries
    def jerseyVersion = '2.22.1'
    def logBackVersion = '1.1.3'
    def servletVersion = '2.5'
    def junitVersion = '4.12'
    def weldVersion = '2.3.1.Final'

    //Testing libraries
    testCompile "junit:junit:$junitVersion"

    //Jersey
    compile "org.glassfish.jersey.containers:jersey-container-jetty-servlet:$jerseyVersion"
    compile "org.glassfish.jersey.media:jersey-media-json-jackson:$jerseyVersion"

    //Jersey CDI
    //compile "org.glassfish.jersey.containers.glassfish:jersey-gf-cdi:2.5.2"
    //compile "org.glassfish.jersey.containers.glassfish:jersey-gf-cdi-ban-custom-hk2-binding:2.14"
    compile "org.glassfish.jersey.ext.cdi:jersey-weld2-se:2.22.1"

    //LogBack
    compile "ch.qos.logback:logback-classic:$logBackVersion"

    //Servlet
    providedCompile "javax.servlet:servlet-api:$servletVersion"
    compile "javax:javaee-api:7.0"

    //Weld
    compile "org.jboss.weld.servlet:weld-servlet-core:$weldVersion"
}

//jettyRun.contextPath = ''
//jettyRunWar.contextPath = ''

gretty {
    // supported values:
    // 'jetty7', 'jetty8', 'jetty9', 'tomcat7', 'tomcat8'
    servletContainer = 'jetty9'
    contextPath = "/"
    port = 8080
}